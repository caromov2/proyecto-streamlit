# üåç Traductor Multiling√ºe con Voz

Proyecto elegido: **Traductor multiling√ºe con voz (voz ‚Üí texto ‚Üí traducci√≥n ‚Üí voz)**  

Para el tema de seguridad, he usado `st.secrets` de Streamlit, evitando exponer las claves en el c√≥digo fuente.

Imports que necesitamos -> import streamlit as st,import requests,from streamlit_mic_recorder import mic_recorder

## √çndice

1. [Descripci√≥n del Proyecto](#descripci√≥n-del-proyecto)  
2. [Tecnolog√≠as y APIs utilizadas](#tecnolog√≠as-y-apis-utilizadas)  
   - [1. Azure Speech-to-Text (STT)](#1-azure-speech-to-text-stt)  
   - [2. Azure Translator](#2-azure-translator)  
   - [3. Azure Text-to-Speech (TTS)](#3-azure-text-to-speech-tts)  
3. [Funcionalidades de la Aplicaci√≥n](#funcionalidades-de-la-aplicaci√≥n)  
4. [Funcionamento del Codigo](#4-como-funciona-el-codigo)


---

## Descripci√≥n del Proyecto

Esta aplicaci√≥n permite a los usuarios grabar o subir un audio y obtener:

1. **Transcripci√≥n del audio a texto**  
2. **Traducci√≥n del texto a otro idioma**  
3. **S√≠ntesis de voz del texto traducido**

El flujo completo se realiza usando **APIs de Azure**, proporcionando un procesamiento de voz y lenguaje r√°pido y confiable.

---

## Tecnolog√≠as y APIs utilizadas

He usado las APIs de Azure, concretamente:

### 1. Azure Speech-to-Text (STT)
- Convierte la voz en texto usando modelos neurales de Azure.  
- Permite seleccionar el idioma de origen para mejorar la precisi√≥n.  
- Configuraci√≥n de audio: WAV o WEBM, 16 kHz, PCM.  
- Proporciona transcripci√≥n r√°pida y precisa de contenido hablado.  

### 2. Azure Translator
- Traduce el texto transcrito a cualquier idioma soportado por Azure.  
- Configuraci√≥n con la versi√≥n `3.0` de la API.  
- Permite traducci√≥n bidireccional, manteniendo coherencia sem√°ntica.  
- Ideal para comunicaci√≥n multiling√ºe instant√°nea.  

### 3. Azure Text-to-Speech (TTS)
- Convierte el texto traducido en voz de alta calidad.  
- Permite elegir la voz y el idioma de salida (p.ej., `ElviraNeural`, `JennyNeural`).  
- Salida en formato MP3 compatible con la mayor√≠a de plataformas.  
- Facilita la creaci√≥n de contenido accesible y multiling√ºe.  

---

## Funcionalidades de la Aplicaci√≥n

- Interfaz **intuitiva y responsiva** usando Streamlit.  
- Grabaci√≥n de audio directamente desde el navegador o subida de archivos existentes.  
- Selecci√≥n de idiomas de origen y destino, con voces configurables.  
- Manejo de errores para cada API, mostrando mensajes claros al usuario.  

## 4. C√≥mo funciona el c√≥digo


Esta secci√≥n explica c√≥mo se procesa la entrada de audio en la aplicaci√≥n.

![Diagrama del flujo de audio](capturas/captura1.png)

--Selector de idioma 
Tenemos dos columnas donde la primera col1 es el selector de idioma origen donde tenemos una array en los idiomas para selecionar y en col2 tenemos el idioma destino 

---Audio---
Tenemos dos columnas con una opcion de grabar audio con mic_recorder que lo importamos o subir un archivo con file_uploader

1. Se inicializa `audio_data` como `None`.
2. Si el usuario sube un archivo, se convierte a bytes y se guarda en `audio_data`. uploaded es el nombre del archivo subido y grabacion_data es el grabado por micro del user
3. Si el usuario graba audio con el micr√≥fono, tambi√©n se guarda en `audio_data`.
4. Se muestra un mensaje de √©xito indicando que el audio est√° listo para procesarse.

![Caputra stt,traduccion](capturas/captura2.png)

---STT---

Tenemos un if donde audio_data se ejecuta si tenemos algo cargado en la bariable audio_data

params definimos los parametros de consulta especificando el idioma de origen del audio creado o subido y el formato es simple. En el headers_stt definimos los parametros para la autentificacion y el tipo de contenido, en el content-type decimos que es audio wab con codificacion PCM y la frecuencia es de 16000 hz y despues en accept especificamos la respuesta en tipo json.

En resp enviamos la soicitud post con todos los parametros en raise_for_status comprobamos si tiene codigo de error. Mostramos si tenemos un error en el except 

Guardamos el conenido que nos devuelve en data en formato json 

comprovamos si nos devuelve el texto transcrito y si funciona en st.succes ponemos lo que nos devuelve en el json que guardamos en data 


--TRADUCION--

En traducion queremos enviar el texto que nos devuelve en el stt.
Para eso necesitamos entrar en la api de traducion donde lo hacemos en trans_parms donde especificamos los parametros necesarios como la api version el idioma origen y destino.

En el header enviamos la key la region y como queremos que nos devuelva el contenido en este caso json.En el body crea el cuerpo de la solicitud JSON, que es una lista que contiene un diccionario con el texto a traducir

en tr_resp enviamos el post.Comprovamos si nos saca algun error para hacer control de errores y si nos devuelve el 200 pasamos a sacar del json el texto traducido.


![Caputra TTS](capturas/captura3.png)

---TTS---

Aqui en esta seccion queremos enviar el texto traducido para crear un audio con el idioma seleccionado.

ssml = f"""...""": Crea el Speech Synthesis Markup Language (SSML). El SSML es un formato XML que instruye al servicio de TTS sobre c√≥mo debe generarse la voz.

    <speak version='1.0' xml:lang='{codigo_destino}'>: Define el idioma base para la s√≠ntesis, utilizando el c√≥digo del idioma destino.

    <voice name='{voz_destino}'>{texto_tradu}</voice>: Especifica la voz a utilizar (voz_destino) y encierra el texto a leer (texto_tradu).

En el headers_tts enviamos la key el ssml y el formato del audio que es MP3, mono, 16kHz, 128kbps.

enviamos el post en tts_resp y comprovamos el status_code si es igual a 200 sacamos el audio y sinos sacamos el error  





